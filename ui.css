@font-face{font-family:"Vazirmatn";src:url("Vazirmatn-Regular.woff2") format("woff2");font-weight:400;font-style:normal;font-display:swap;}
html,body{font-family:"Vazirmatn",system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans Arabic",Arial,sans-serif;}
:root{
  --glass: rgba(255,255,255,.55);
  --glass-2: rgba(255,255,255,.35);
  --border: rgba(0,0,0,.08);
  --shadow: 0 10px 30px rgba(0,0,0,.10);
  --brand: #d21f2b;
}
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: 'Vazirmatn', Tahoma, Segoe UI, system-ui;
  background:
    radial-gradient(1400px 600px at 50% -10%, rgba(255,255,255,.7), rgba(255,255,255,0)),
    linear-gradient(180deg, #f7f8fb, #eef1f6);
}

/* Persian font wiring (font at root) */
@font-face{
  font-family: 'Vazirmatn', Tahoma, Segoe UI, system-ui;
  src: url('./Vazirmatn-Regular.woff2') format('woff2');
  font-weight: 400; font-style: normal; font-display: swap;
}

.grid{
  display:grid; grid-template-columns: 380px 1fr; gap: 18px;
  padding: 18px; height:100%;
  transition: grid-template-columns .25s ease;
}
.glass{
  backdrop-filter: blur(18px);
  background: var(--glass);
  border: 1px solid var(--border);
  border-radius: 22px;
  box-shadow: var(--shadow);
}
.panel{ padding: 18px; display:flex; flex-direction:column; overflow:hidden; }
.panel .brand{ display:flex; align-items:center; gap:12px; margin-bottom:10px; }
.panel .brand img{ width:90px; filter: drop-shadow(0 4px 10px rgba(0,0,0,.12)); }
.panel .brand h1{ margin:0; font-size:20px; letter-spacing:.15em; }
.panel .brand p{ margin:0; color:#666; font-size:12px; }
.group{ margin-top:16px; }
label{ display:block; font-size:13px; color:#333; margin-bottom:6px; }
.row{ display:flex; gap:8px; }
input{
  flex:1; height:38px; padding:0 12px; border-radius:12px;
  border:1px solid var(--border); background: var(--glass-2); outline:none;
  transition: box-shadow .2s ease, border-color .2s ease;
}
input:focus{ border-color: #bbb; box-shadow: 0 0 0 4px rgba(0,0,0,.03); }
.btn{
  height:38px; padding:0 14px; border-radius:12px; border:1px solid var(--border);
  background: white; cursor:pointer; transition: transform .05s ease, box-shadow .2s ease;
}
.btn:active{ transform: translateY(1px); }
.btn.primary{ background: linear-gradient(180deg,#ff606b,#d21f2b); color:#fff; border:0; }
.btn.ghost{ background: transparent; }
.btn.danger{ background: #111; color:#fff; }
.actions{ display:grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.muted{ color:#666; font-size:12px; }
.foot{ margin-top:auto; display:flex; justify-content:space-between; align-items:center; padding-top:10px; border-top:1px dashed var(--border); }

.workspace{
  position:relative;
  overflow:hidden;
  padding:0;
  border-radius:22px;
}
#placeholder{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; text-align:center; }
#placeholder .hero img{ width:220px; filter: drop-shadow(0 5px 16px rgba(0,0,0,.18)); }

/* Full webview coverage without cropping */
webview#view{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  display:none;
  border:0;
}

/* Loading overlay */
.overlay{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  background: linear-gradient(180deg, rgba(255,255,255,.5), rgba(255,255,255,.7));
  backdrop-filter: blur(6px); z-index: 10;
}
.hidden{ display:none !important; }

/* Spinner */
.spinner{ position:relative; width:220px; height:220px; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:10px; }
.spinner img{ width:120px; height:auto; z-index:2; }
.spinner .ring{
  position:absolute; width:200px; height:200px; border-radius:50%;
  border:4px solid rgba(0,0,0,.06); border-top-color: var(--brand); animation: spin 1.2s linear infinite;
}
.spinner .txt{ font-size:13px; color:#444; margin-top:8px; }
@keyframes spin { to{ transform: rotate(360deg) } }

/* Toasts */
.toaster{ position:fixed; right:22px; bottom:22px; display:flex; flex-direction:column; gap:8px; z-index:9999; }
.toast{ min-width:260px; max-width:360px; padding:12px 14px; border-radius:14px; color:#111; border:1px solid var(--border); background: rgba(255,255,255,.96); box-shadow: var(--shadow); animation: slideIn .25s ease both; display:flex; gap:10px; align-items:flex-start; }
.toast.success{ border-color: #2ecc71; }
.toast.error{ border-color: #e74c3c; }
.toast .title{ font-weight:700; margin-bottom:4px; }
.toast .msg{ font-size:13px; color:#333; }
.toast .close{ margin-left:auto; cursor:pointer; opacity:.6; }
@keyframes slideIn{ from{ transform: translateY(10px); opacity:0 } to{ transform:none; opacity:1 } }

/* Sidebar collapsed mode */
body.collapsed .grid{ grid-template-columns: 0 1fr; }
body.collapsed #sidebar{ display:none; }
.fab{
  position:absolute; right:16px; top:16px; z-index: 20;
  height:42px; padding:0 14px; border-radius:12px; border:1px solid var(--border);
  background: white; box-shadow: var(--shadow); cursor:pointer;
}

/* Web-only fullscreen mode */
body.webfs .grid{ grid-template-columns: 0 1fr; }
body.webfs #sidebar{ display:none; }
body.webfs .workspace{ border-radius:16px; }


/* === App layout & WebView fix === */
html, body { height: 100%; }
body, #app { height: 100%; }
#app.app { display: flex; flex-direction: row-reverse; height: 100%; }
.sidebar {
  width: 260px; min-width: 220px; background: var(--glass-2); border-left: 1px solid var(--border);
  backdrop-filter: blur(12px);
  transition: width 220ms ease, transform 220ms ease, opacity 220ms ease;
}
body.sidebar-collapsed .sidebar { transform: translateX(100%); width: 0; opacity: 0; border-left: 0; }
.content { flex: 1 1 auto; display: flex; flex-direction: column; height: 100%; min-width: 0; }
.content .content-inner { flex: 1 1 auto; display: flex; min-height: 0; }
webview, #view { flex: 1 1 auto; width: 100%; height: 100% !important; display: block; border:0; }
.floating-toggle {
  position: fixed; top: 12px; left: 12px; z-index: 9999;
  padding: 8px 10px; border-radius: 12px; background: var(--glass); border: 1px solid var(--border);
  box-shadow: var(--shadow); cursor: pointer;
}
.icon-btn { border:0; background: var(--glass); border:1px solid var(--border); padding:6px 10px; border-radius:10px; cursor:pointer; }

/* Admin modal */
.modal.hidden{display:none;}
.modal{position:fixed;inset:0;z-index:10000;display:flex;align-items:center;justify-content:center;}
.modal .modal-backdrop{position:absolute;inset:0;background:#0008;backdrop-filter:blur(4px);}
.modal .modal-dialog{position:relative;width:92vw;height:86vh;background:var(--glass);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);display:flex;flex-direction:column;overflow:hidden;}
.modal.fullscreen .modal-dialog{width:100vw;height:100vh;border-radius:0;}
.modal .modal-header{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;background:var(--glass-2);border-bottom:1px solid var(--border);}
.modal .modal-title{display:flex;gap:12px;align-items:center;}
.modal .status{font-size:.85rem;opacity:.7}
.modal .modal-actions .icon-btn{margin-inline-start:8px;}
.modal .modal-body{position:relative;flex:1 1 auto;display:flex;min-height:0;}
.modal webview#modalView{flex:1 1 auto;width:100%;height:100% !important;display:block;border:0;}
.modal .overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:var(--glass);border-left:1px solid var(--border);}
.modal .overlay .spinner{position:relative;width:120px;height:120px;display:grid;place-items:center;}
.modal .overlay .ring{position:absolute;width:100%;height:100%;border-radius:50%;border:4px solid #0002;border-top-color:#0006;animation:spin 1.2s linear infinite;}
@keyframes spin{to{transform:rotate(360deg)}}
